# Process an entry of the yaml dependency list
FUNCTION(PROCESS_DEPENDENCY_ENTRY PARENT_BUILD_TARGET DEPENDENCY_ENTRY)
  # Check if current depenency entry opens details
  STRING(COMPARE EQUAL "${DEPENDENCY_ENTRY}" "at" DETAILS_START)
  IF(DETAILS_START)
    SET(IS_IN_DETAILS TRUE)
  ENDIF()
  TART_DEBUG("processing: ${DEPENDENCY_ENTRY}")
  IF(IS_IN_DETAILS)
    TART_DEBUG("IS_IN_DETAILS")
    STRING(COMPARE EQUAL "${DEPENDENCY_ENTRY}" "end" DETAILS_ENDED)
    IF(DETAILS_ENDED)
      TART_DEBUG("DETAILS_ENDED")
      SET(IS_IN_DETAILS FALSE)
      GET_GIT_REPO_URL_AND_TAG_FROM_DETAILS("${CURRENT_DETAILS}" "${LAST_ENTRY}" GIT_URL GIT_TAG)
      ASSERT_LIB_AVAILABILITY("${GIT_URL}" "${GIT_TAG}" "${CMAKE_CURRENT_LIST_DIR}/..")
      SET(CURRENT_DETAILS "")
    ELSE()
      TART_DEBUG("STILL_IN_DETAILS")
      LIST(APPEND CURRENT_DETAILS ${DEPENDENCY_ENTRY})
    ENDIF()
  ELSE()
    #TODO(nidegen) is getting called at "github"
    TART_DEBUG("NOT_IN_DETAILS")
    STRING(COMPARE EQUAL "${LAST_ENTRY}" "" HAS_NO_PREVIOUS_ENTRY)
    IF(NOT HAS_NO_PREVIOUS_ENTRY)
      ADD_TART_DEPENDENCY(${LIBRARY_NAME} ${LAST_ENTRY} )
    ENDIF()
    SET(LAST_ENTRY ${DEPENDENCY_ENTRY})
  ENDIF()
ENDFUNCTION(ADD_TART_DEPENDENCY)
